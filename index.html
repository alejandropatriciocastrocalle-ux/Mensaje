<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Mensaje Interactivo</title>
<style>
body {
  margin: 0;
  padding: 0;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
  font-family: Georgia, "Times New Roman", serif;
  background: black;
  color: #ffffff;
  overflow: hidden;
}
#start-screen {
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
  width: 100%;
  height: 100%;
  position: absolute;
  top: 0;
  left: 0;
  z-index: 10;
}
#start-screen button {
  padding: 30px 60px;
  font-size: 45px;
  border: none;
  border-radius: 12px;
  background: fuchsia;
  box-shadow: 0 6px 15px rgba(0,0,0,0.5);
  cursor: pointer;
  transition: background 0.3s;
}
#start-screen button:hover {
  background: #ff33ff;
}
#app {
  position: relative;
  display: none;
  width: 100%;
  height: 100%;
}
#video-bg {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  z-index: -1;
}
#text {
  position: absolute;
  top: 25%;
  left: 10%;
  right: 10%;
  bottom: 25%;
  font-size: 30px;
  text-align: justify;
  white-space: pre-line;
  overflow-y: auto;
  color: white;
  opacity: 0;
}
#buttons {
  position: absolute;
  bottom: 20%;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  justify-content: center;
  gap: 10px;
}
#buttons button {
  padding: 21px 42px;
  font-size: 30px;
  border: none;
  border-radius: 8px;
  background: fuchsia;
  cursor: pointer;
  transition: background 0.3s;
}
#buttons button:hover {
  background: #ff33ff;
}
#image-screen {
  position: absolute;
  top: 25%;
  left: 10%;
  right: 10%;
  bottom: 25%;
  display: none;
  justify-content: center;
  align-items: center;
  opacity: 0; /* inicialmente transparente */
}
#image-screen img {
  max-width: 100%;
  max-height: 100%;
  object-fit: contain;
}
</style>
</head>
<body>

<div id="start-screen">
  <button onclick="startApp()">Empezar</button>
</div>

<div id="app">
  <video id="video-bg" src="video.mp4" autoplay muted loop playsinline></video>
  <div id="text"></div>
  <div id="image-screen"><img id="image-content" src=""></div>
  <div id="buttons"></div>
</div>

<audio id="bg-music" loop>
  <source src="musica.mp3" type="audio/mpeg">
</audio>

<audio id="page-sound">
  <source src="page.mp3" type="audio/mpeg">
</audio>

<script>
const app = document.getElementById("app");
const textElement = document.getElementById("text");
const buttonsElement = document.getElementById("buttons");
const bgMusic = document.getElementById("bg-music");
const pageSound = document.getElementById("page-sound");
const imageScreen = document.getElementById("image-screen");
const imageContent = document.getElementById("image-content");

const screens = {
  "PANTALLA 1": { text: "Hola Ada, lo siento no hay ningÃºn proyecto,pero tengo algo importante que contarte Â¿quisieras escucharme?", buttons: [ { label: "EstÃ¡ bien", next: "PANTALLA 2" }, { label: "no", next: "PANTALLA 1.1" } ] },
  "PANTALLA 1.1": { text: "por favorâ€¦", buttons: [ { label: "estÃ¡ bien", next: "PANTALLA 2" } ] },
  "PANTALLA 2": { text: "DespuÃ©s de mucho tiempo dÃ¡ndole vueltas a mi mente, preguntÃ¡ndome si debÃ­a empezar o callar para siempre, entendÃ­ que el silencio no era lo que necesitaba, decidÃ­ tomar acciÃ³n y asÃ­ naciÃ³ esta carta, en ella , te mostrarÃ© una parte pura y sincera de mi, espero sea de tu agrado:", buttons: [ { label: "continuar", next: "PANTALLA 3" } ] },
  "PANTALLA 3": { text: "Estuve muchos, muchos dÃ­as y quizÃ¡ el doble de noches tratando de comprender muchas cosas, en silencio, no entendÃ­a cÃ³mo pude ser tan necio ,tan insensible , tan desagradecido , tan mala persona contigo , me rompÃ­a la cabeza tratando de entender cÃ³mo te pude ofrecer tan poco durante tanto tiempo y no haberme dado cuenta.\nPero ahora entiendo.", buttons: [ { label: "continuar", next: "PANTALLA 4" } ] },
  "PANTALLA 4": { text: "Soportaste muchas cosas malas , en silencio algunas veces ,llorando a solas muchas tantas veces mÃ¡sâ€¦\n\nNo recuerdo haberte pedido perdÃ³n por esto , esa vez en la que te dije que la relaciÃ³n estaba bien y que tÃº eras la problemÃ¡tica,recuerdas?\n\nYo si ,mis errores pasan por mi cabeza dÃ­a y noche ,pues no logro aÃºn del todo asimilar que fui yo el que los cometiÃ³, asÃ­ que hoy te pido perdÃ³n , perdÃ³n por haberte hecho soportar un nivel de ceguera tan alto â€¦ que mÃ­ miopÃ­a serÃ­a considerada un superpoder al lado de ella", buttons: [ { label: "estÃ¡ bien", next: "PANTALLA 5" } ] },
  "PANTALLA 5": { text: "Ada , TÃº me mostraste lo mÃ¡s noble y tierno que hay en el mundo, es por ti y gracias a ti que quise mejorar , pudiste simplemente haberme odiado y escupido , pero en cambio , me aconsejaste , me diste a ver mis errores, me resaltaste lo bueno y lo malo â€¦. Al final solo me demostraste lo que ya sabÃ­a desde antes ,que eres alguien muy especial , que hiciste cosas que solo una persona tan especial como tÃº pudo haber hecho . me mostraste mis defectos , mis carencias, pero tambiÃ©n dijiste muchas cosas que valorabas de mÃ­ y como podÃ­a mejorarlas. En vez de hundirme en la miseria ,no solo me hiciste ver quiÃ©n era, sino quiÃ©n podÃ­a llegar a ser, creo que podrÃ­a escribir muchos mÃ¡s texto demostrando lo agradecido que estoy por ello , y que estarÃ© por el resto de mi vida, sea cual sea nuestro destino.", buttons: [ { label: "estÃ¡ bien", next: "PANTALLA 6" } ] },
  "PANTALLA 6": { text: "Sabes , tambiÃ©n me preguntÃ© si es correcto lo que estoy haciendo , si es el mejor caminoâ€¦si es lo mejor.\n\nhoy me pregunto si tal decisiÃ³n existe ,creo que solo tomamos desiciones, sin mÃ¡s , no crees que si todo estuviera escrito , y existiera la mejor decisiÃ³n, un camino lineal, la vida no tendrÃ­a sentido.?\nNo existen las decisiones correctas , estÃ¡ en nosotros y nuestras acciones ,hacer que sea CORRECTA la decisiÃ³n que tomemos\n\nYo ya tomÃ© mi decisiÃ³n", buttons: [ { label: "continuar", next: "PANTALLA 7" } ] },
  "PANTALLA 7": { text: "durante mucho tiempo mis errores del pasado me gritaron que no te merezco, que no te haga perder el tiempo , que ya todo acabÃ³, sin embargo mi corazÃ³n lo niega rotundamente y me dice â€¦.quiero , quiero", buttons: [ { label: "continuar", next: "PANTALLA 8" } ] },
  "PANTALLA 8": { type: "typing", messages: [ "Quiero ser el vendaje que cierre tus heridas,", " quiero estar a tu lado y abrigarte cuando las noches sean frÃ­as,", " quiero ser el hombro donde puedas llorar hasta quedarte dormida,", " quiero volver a ser el motivo de tus sonrisas,", " quiero que conozcamos el mundo juntos , que se hagan realidad tantos planes y sueÃ±os que quiero cumplir a tu lado,", " Adahana,  QUIERO VIVIR MI VIDA CONTIGO , quiero demostrarte que puedo amarte tan fuerte como nunca y quiero que tÃº me ames tambiÃ©n ." ], buttons: [ { label: "Siguiente", next: "PANTALLA 9" } ] },
  "PANTALLA 9": { text: "Quiero que nos acostemos en tu sillÃ³n como antes , que algÃºn gato se suba allÃ­ y nos riamos ambos de Ã©l , o quizÃ¡ que tÃº te molestes con Ã©l por alguna razÃ³n que ya no recuerdo , lo que sÃ­ recuerdo es que una vez te describÃ­ cuÃ¡l era mi significado de felicidad , lo recuerdas? Bueno si no lo entendiste , hoy te lo demuestro con una foto , una muy Linda que miro 8 de cada 7 dÃ­as y que me recuerda que puedo ser feliz.", buttons: [ { label: "continuar", next: "PANTALLA 10" } ] },
  "PANTALLA 10": { type: "image", image: "image.webp", buttons: [ { label: "continuar", next: "PANTALLA 11" } ] },
  "PANTALLA 11": { text: "SÃ© que hay muchas cosas que, si sucede el caso,deberÃ­amos conversar y arreglar , algunas diferencias quizÃ¡, pero te prometo que dispondrÃ­a mi vida entera tratando de descifrarte, solo necesito que me permits mostrarte la mejor versiÃ³n de mÃ­ que he conseguido hasta ahora. Hay un dicho que dice que nunca te baÃ±as en las mismas aguas de un rÃ­o, y es verdad , las aguas cambian ,pero nuestra esencia permanece, no debemos temerle a la corriente , muchas veces no se lleva con ella nuestro ser , a veces ,solo pule lo que somos , lava nuestras heridas , nuestras imperfecciones , no nos roba nuestra identidad, nos ayuda a ser mÃ¡s limpios y fieles a nosotros mismos .", buttons: [ { label: "continuar", next: "PANTALLA 12" } ] },
  "PANTALLA 12": { text: "El rÃ­o me enseÃ±Ã³ tambiÃ©n que no soy otro, pero tampoco el mismo de ayer, por favor , acÃ©rcate y mÃ­rame con otros ojos ,no como mirando al pasado , sino imaginando un nuevo horizonte , uno que me harÃ­a muy feliz mostrarte . SerÃ¡s tÃº quien decida si vale la pena o no dar un Ãºltimo salto de riesgo por mi . Te prometo que serÃ¡ una muy buena inversiÃ³n que te darÃ¡ retornos en forma de felicidad en el mediano y largo plazo.", buttons: [ { label: "continuar", next: "PANTALLA 13" } ] },
  "PANTALLA 13": { text: "Necesitas tiempo de pensarlo ? No importa , he aprendido la paciencia , tantas veces en las que mi manos temblaban por escribirte ,pero en las que escogÃ­ guardar silencio , pues entendÃ­ que aÃºn no era el momento. AsÃ­ que no te preocupes si necesitas tiempo , te esperarÃ© cuanto sea necesario . EstarÃ© aquÃ­ ,parado en el rÃ­o , esperando que la corriente te empuje hacia mi nuevamente,si lo dejas hacerlo â€¦", buttons: [ { label: "Final", next: "FIN" } ] },
  "FIN": { text: "Gracias por leer ðŸ’–", buttons: [ { label: "Reiniciar", next: "PANTALLA 1" }, { label: "Salir", next: "SALIR" } ] }
};

function startApp() {
  document.getElementById("start-screen").style.display = "none";
  app.style.display = "block";
  bgMusic.volume = 0.5;
  bgMusic.play();
  showScreen("PANTALLA 1");
}

function fadeText(newText, duration = 1000) {
  textElement.style.transition = `opacity ${duration}ms ease-in-out`;
  textElement.style.opacity = 0;
  setTimeout(() => {
    textElement.textContent = newText;
    textElement.style.opacity = 1;
  }, duration);
}

function typeMessages(messages, delay = 1000, index = 0) {
  if (index >= messages.length) return;
  let i = 0;
  const message = messages[index];
  const interval = setInterval(() => {
    textElement.textContent += message[i];
    i++;
    if (i >= message.length) {
      clearInterval(interval);
      setTimeout(() => {
        typeMessages(messages, delay, index + 1);
      }, delay);
    }
  }, 50);
}

function showScreen(id) {
  const screen = screens[id];
  buttonsElement.innerHTML = "";
  textElement.style.display = "block";
  imageScreen.style.display = "none";

  if(screen.type === "image") {
    textElement.style.display = "none";
    imageScreen.style.display = "flex";
    imageScreen.style.opacity = 0; // inicial transparente
    imageContent.src = screen.image;
    setTimeout(() => { // efecto fade-in
      imageScreen.style.transition = "opacity 1s ease-in-out";
      imageScreen.style.opacity = 1;
    }, 50);
  } else if (screen.type === "typing") {
    textElement.textContent = "";
    textElement.style.opacity = 1;
    typeMessages(screen.messages, 1000);
  } else {
    fadeText(screen.text, 1000);
  }

  screen.buttons.forEach(b => {
    const btn = document.createElement("button");
    btn.textContent = b.label;
    btn.onclick = () => {
      pageSound.currentTime = 0;
      pageSound.play();
      if (b.next === "SALIR") {
        window.close();
      } else {
        showScreen(b.next);
      }
    };
    buttonsElement.appendChild(btn);
  });

  buttonsElement.style.display = "flex"; // aseguramos que el botÃ³n siempre se vea
}
</script>
</body>
</html>
