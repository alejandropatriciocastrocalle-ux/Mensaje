<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Mensaje Interactivo</title>
<style>
body {
  margin: 0;
  padding: 0;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
  font-family: Georgia, "Times New Roman", serif;
  background: black;
  color: #ffffff;
  overflow: hidden;
}
#start-screen {
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
  width: 100%;
  height: 100%;
  position: absolute;
  top: 0;
  left: 0;
  z-index: 10;
}
#start-screen button {
  padding: 30px 60px;
  font-size: 45px;
  border: none;
  border-radius: 12px;
  background: fuchsia;
  box-shadow: 0 6px 15px rgba(0,0,0,0.5);
  cursor: pointer;
  transition: background 0.3s;
}
#start-screen button:hover {
  background: #ff33ff;
}
#app {
  position: relative;
  display: none;
  width: 100%;
  height: 100%;
}
#video-bg {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  z-index: -1;
}
#text {
  position: absolute;
  top: 25%;
  left: 10%;
  right: 10%;
  bottom: 25%;
  font-size: 25px;
  text-align: justify;
  white-space: pre-line;
  overflow-y: auto;
  color: white;
  opacity: 0;
}
#buttons {
  position: absolute;
  bottom: 20%;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  justify-content: center;
  gap: 10px;
}
#buttons button {
  padding: 21px 42px;
  font-size: 30px;
  border: none;
  border-radius: 8px;
  background: fuchsia;
  cursor: pointer;
  transition: background 0.3s;
}
#buttons button:hover {
  background: #ff33ff;
}
#image-screen {
  position: absolute;
  top: 25%;
  left: 10%;
  right: 10%;
  bottom: 25%;
  display: none;
  justify-content: center;
  align-items: center;
}
#image-screen img {
  max-width: 100%;
  max-height: 100%;
  object-fit: contain;
}
#video-screen {
  display: none;
  position: absolute;
  top: 0; left: 0;
  width: 100%; height: 100%;
  justify-content: center;
  align-items: center;
  flex-direction: column;
  background: black;
}
#video-screen video {
  max-width: 100%;
  max-height: 100%;
}
</style>
</head>
<body>

<div id="start-screen">
  <button onclick="startApp()">Empezar</button>
</div>

<div id="app">
  <video id="video-bg" src="video.mp4" autoplay muted loop playsinline></video>
  <div id="text"></div>
  <div id="image-screen"><img id="image-content" src=""></div>
  <div id="video-screen">
    <video id="special-video"></video>
    <div id="video-buttons"></div>
  </div>
  <div id="buttons"></div>
</div>

<audio id="bg-music" loop>
  <source src="musica.mp3" type="audio/mpeg">
</audio>

<audio id="page-sound">
  <source src="page.mp3" type="audio/mpeg">
</audio>

<script>
const app = document.getElementById("app");
const textElement = document.getElementById("text");
const buttonsElement = document.getElementById("buttons");
const bgMusic = document.getElementById("bg-music");
const pageSound = document.getElementById("page-sound");
const imageScreen = document.getElementById("image-screen");
const imageContent = document.getElementById("image-content");
const videoScreen = document.getElementById("video-screen");
const specialVideo = document.getElementById("special-video");
const videoButtons = document.getElementById("video-buttons");

let currentVideoIndex = 0;
const videos = ["video2.mp4", "video3.mp4"];

const screens = {
  "PANTALLA 1": { text: "Hola Ada, lo siento no hay ningún proyecto,pero tengo algo importante que contarte ¿quisieras escucharme?", buttons: [ { label: "Está bien", next: "PANTALLA 2" }, { label: "no", next: "PANTALLA 1.1" } ] },

  "PANTALLA 1.1": { text: "por favor…", buttons: [ { label: "está bien", next: "PANTALLA 2" } ] },

  "PANTALLA 2": { text: "Hola ada, espero estés bien,el día de hoy tengo para ti un mensaje, voy a contarte algo de una forma especial y sincera, te sugiero encuentres un lugar tranquilo antes de leerlo, espero sea de tu agrado:", buttons: [ { label: "continuar", next: "PANTALLA 3" } ] },

  "PANTALLA 3": { text: "Pasé bastante tiempo, días enteros, semanas, meses.. tratando de entender cómo pude comportarme de una manera tan nefasta, tan necia ,tan insensible , tan desagradecida ..cómo es que fui tan mala persona contigo , me rompía la cabeza tratando de comprender cómo te pude ofrecer tan poco durante tanto tiempo y no haberme dado cuenta sino hasta el final. Pero ahora entiendo....", buttons: [ { label: "continuar", next: "PANTALLA 3.1" } ] },

  "PANTALLA 3.1": { text: "Entiendo que no estaba listo para ti ....nunca lo estuve , ni la primera vez, ni cuando regresamos, ni cuando te enteraste y menos cuando falsamente pensé que había cambiado y lo intentamos nuevamente, qué tonto fui ,prueba de ello fue el rotundo fracaso que sucedió posteriormente, todo por mi culpa.\n\nJamás hice un cambio real, seguía dejando que mis vicios silenciosos me controlaran ,ese era mi gran problema, nunca cambié mi forma de ser, simplemente creí que lo estaba haciendo, cuando solo repetía lo mismo esperando un resultado distinto, no hice más que tropezar 100 veces en mi intento de ser mejor, pero te prometo que no fue porque no te amaba Ada, sino porque aún seguía luchando con lo que más odiaba de mí.", buttons: [ { label: "está bien", next: "PANTALLA 4" } ] },

  "PANTALLA 4": { text: "Soportaste muchas cosas malas , lloraste frente a mi algunas veces, y a solas, en silencio, muchas tantas veces más…\n\Ada, no quiero que esta sea la última vez que lo haga, pero si es el caso, quiero disculparme contigo una vez más", buttons: [ { label: "continuar", next: "PANTALLA S" } ] },

  "PANTALLA S": { text: "Lamento profundamente no haber estado  la altura de una persona tan maravillosa como tú, lamento haber sido completamente inconsciente, insensible, traicionarte muchas veces, decepcionándote de muchas maneras, y decepcionándome a mi en el proceso, lamento haberte criticado cuando necesitabas un impulso, lamento haberme callado cuando más debíamos comunicarnos, lamento haberte dañado física y emocionalmente, cuando debí protegerte, lamento no haberte dicho lo hermosa que te veías, cuando disfrutaba con todo mi ser verte sonreir, lamento no haberte dado el cariño, la ternura y el amor que merecías, lamento haberte ignorado cuando más necesitabas de mi prescencia, lamento haberte hecho sentir insegura, cuando necesitabas confianza, lamento haberte mostrado lo peor de mi, cuando tú dabas lo mejor de ti, lamento haberte hecho soportar un nivel de estupidez y ceguera TAN ALTO, que mi miopía sería considerada un superpoder al lado de ella\n\nAda, perdón....por todo.", buttons: [ { label: "está bien", next: "PANTALLA 5" } ] },

  "PANTALLA 5": { text: "Tú me mostraste lo más noble y tierno que hay en el mundo, es por tí y gracias a tí que quise mejorar, pudiste simplemente haberme odiado y escupido, pero en cambio, me aconsejaste, me diste a ver mis errores, me resaltaste lo bueno y lo malo …. Al final solo me demostraste lo que ya sabía desde antes, que eres una persona muy especial. Me mostraste mis defectos, mis carencias, pero también me mostraste muchas cosas que valorabas de mí y como podía mejorarlas. En vez de hundirme en la miseria, me hiciste ver quién era y quién podía llegar a ser, podría pasarme horas explicando lo agradecido que estoy por ello", buttons: [ { label: "está bien", next: "PANTALLA 6" } ] },

  "PANTALLA 6": { text: "Sabes , también me pregunté si es correcto lo que estoy haciendo , si es el mejor camino…si es lo mejor.\n\nhoy me pregunto si tal decisión existe ,creo que solo tomamos desiciones, sin más, ¿No crees que si todo estuviera escrito y existiera la mejor decisión, un camino lineal, la vida no tendría sentido?\nNo existen las decisiones correctas, está en nosotros y nuestras acciones ,hacer que sea CORRECTA la decisión que tomemos\n\nYo ya tomé mi decisión", buttons: [ { label: "continuar", next: "PANTALLA 7" } ] },

  "PANTALLA 7": { text: "durante mucho tiempo mis errores del pasado me recordaban que no te merecía, que no te haga perder el tiempo , que ya todo acabó, durante mucho tiempo, lo que más me frenó no fue la dificultad o la baja probabilidad de que pudieras volver a creer en mi, sino que ni siquiera consideraras que fuera necesario, que no veas beneficio alguno en ello, sino que al contrario, lo que te haría feliz finalmente sea olvidarte de mi de una vez por todas.... de ser así lo iba a aceptar, pues lo entendería perfectamemente. O almenos eso pensaba, la realidad es que mi corazón se niega rotundamente a aceptarlo, en vez de ello, te extraña profundamente, y me dice:", buttons: [ { label: "continuar", next: "PANTALLA 8" } ] },

  "PANTALLA 8": { type: "typing", messages: [ "Quiero ser el vendaje que cierre tus heridas,", " quiero estar a tu lado y abrigarte cuando las noches sean frías,", " quiero ser el hombro donde puedas llorar hasta quedarte dormida,", " quiero volver a ser el motivo de tus sonrisas,", " quiero que conozcamos el mundo juntos , que se hagan realidad tantos planes y sueños que quiero cumplir a tu lado,", " Adahana, quiero vivir mi vida contigo, quiero demostrarte que puedo amarte tan fuerte como nunca ..." ], buttons: [ { label: "Siguiente", next: "PANTALLA 9" } ] },

  "PANTALLA 9": { text: "Quiero que nos acostemos en tu sillón como antes , que algún gato se suba allí y nos riamos ambos de él , o quizá que tú te molestes con él por alguna razón que ya no recuerdo.", buttons: [ { label: "continuar", next: "PANTALLA 10" } ] },

  "PANTALLA 10": { type: "image", image: "image.webp", buttons: [ { label: "continuar", next: "PANTALLA 11" } ] },

  "PANTALLA 11": { text: "Sé que hay muchas cosas que, si sucede el caso, deberíamos conversar y arreglar , algunas diferencias quizá, pero te prometo que dispondría mi vida entera tratando de descifrarte. Sé que será difícil, yo lo sé más que nadie, sé que la gran mayoría pensaría lo mismo si le contaras la historia, te dirían que todo está perdido, que no tiene solución, que no tiene sentido, pero también sé que al final de todo, somos nosotros mismos y nadie más, los protagonistas de nuestra propia película, y solo nosotros podremos ver el final, somos los únicos responsables de tomar las riendas de nuestra vida, muchas personas nos acompañarán si,pero nadie puede hacer el trabajo por nosotros...permítete mostrarte la historia que quiero contar", buttons: [ { label: "continuar", next: "PANTALLA 11.1" } ] },

"PANTALLA 11.1": { text: "¿hemos cambiado? Hay un dicho que dice que nunca te bañas en las mismas aguas de un río, y es verdad, las aguas cambian, pero nuestra esencia permanece, no debemos temerle a la corriente, muchas veces no se lleva con ella nuestro ser, a veces, solo pule lo que somos, lava nuestras heridas, nuestras imperfecciones, no nos roba nuestra identidad, nos ayuda a ser más limpios y fieles a nosotros mismos.", buttons: [ { label: "continuar", next: "PANTALLA 12" } ] },

  "PANTALLA 12": { text: "El río me enseñó también que no soy otro, pero tampoco el mismo de ayer, podrás verlo si decides acercarte a mi y mirarme con otros ojos ,no como recordando el pasado, sino imaginando un nuevo horizonte, uno que me haría muy feliz mostrarte. Serás tú quien decida si vale la pena o no dar un último salto de riesgo por mi . Te prometo que será una muy buena inversión que te dará retornos en forma de felicidad en el mediano y largo plazo, en el corto quizá tengamos una ligera turbulencia jaja.", buttons: [ { label: "continuar", next: "PANTALLA 13" } ] },

  "PANTALLA 13": { text: "Ada, no espero que todo se arregle hoy, ni siquiera en algunos meses tal vez, tampoco espero que nosotros formemos algo en el corto plazo, eso sería irreal, pero...quiero invitarte a salir, a comer, a conversar.... quiero conocerte nuevamente, conóceme también......Necesitas tiempo de pensarlo? No importa, he aprendido la paciencia, tantas veces en las que por ansiedad quise escribirte, pero escogí guardar silencio, pues entendí que aún no era el momento. Así que no te preocupes si necesitas tiempo, te esperaré cuanto sea necesario. Estaré aquí, parado en el medio del río, esperando que la corriente te empuje hacia mi nuevamente, si lo dejas hacerlo.\n\Tal como te dije antes, yo ya decidí qué película quiero ver al final de mi vida......¿Cuál quieres ver tú?", buttons: [ { label: "VER MENSAJE IMPORTANTE", next: "VIDEO" } ] },
  "VIDEO": { type: "video" },

  "FIN": { text: "Gracias por leer 💖", buttons: [ { label: "Reiniciar", next: "PANTALLA 1" }, { label: "Salir", next: "SALIR" } ] }
};

function startApp() {
  document.getElementById("start-screen").style.display = "none";
  app.style.display = "block";
  bgMusic.volume = 0.5;
  bgMusic.play();
  showScreen("PANTALLA 1");
}

function fadeText(newText, duration = 1000) {
  textElement.style.transition = `opacity ${duration}ms ease-in-out`;
  textElement.style.opacity = 0;
  setTimeout(() => {
    textElement.textContent = newText;
    textElement.style.opacity = 1;
  }, duration);
}

function typeMessages(messages, delay = 1000, index = 0) {
  if (index >= messages.length) return;
  let i = 0;
  const message = messages[index];
  const interval = setInterval(() => {
    textElement.textContent += message[i];
    i++;
    if (i >= message.length) {
      clearInterval(interval);
      setTimeout(() => {
        typeMessages(messages, delay, index + 1);
      }, delay);
    }
  }, 50);
}

function playNextVideo() {
  currentVideoIndex++;
  if (currentVideoIndex < videos.length) {
    specialVideo.src = videos[currentVideoIndex];
    specialVideo.play();
  } else {
    // Todos los videos terminaron, mostrar botón final
    const btn = document.createElement("button");
    btn.textContent = "Final";
    btn.onclick = () => showScreen("FIN");
    videoButtons.appendChild(btn);
  }
}

function showScreen(id) {
  const screen = screens[id];
  buttonsElement.innerHTML = "";
  textElement.style.display = "block";
  imageScreen.style.display = "none";
  videoScreen.style.display = "none";
  specialVideo.pause();
  specialVideo.currentTime = 0;
  
  // Reiniciar el índice de videos cuando se sale de la pantalla de video
  currentVideoIndex = 0;

  if (screen.type === "image") {
    textElement.style.display = "none";
    imageScreen.style.display = "flex";
    imageContent.src = screen.image;
  } else if (screen.type === "typing") {
    textElement.textContent = "";
    textElement.style.opacity = 1;
    typeMessages(screen.messages, 1000);
  } else if (screen.type === "video") {
    textElement.style.display = "none";
    buttonsElement.style.display = "none";
    videoScreen.style.display = "flex";
    
    // Detener la música cuando el video especial comienza
    bgMusic.pause();
    
    // Configurar el primer video
    specialVideo.src = videos[0];
    specialVideo.play();
    
    videoButtons.innerHTML = "";
    
    // Configurar el evento para reproducir el siguiente video cuando termine el actual
    specialVideo.onended = playNextVideo;
    
    return;
  } else {
    fadeText(screen.text, 1000);
  }

  if (screen.buttons) {
    screen.buttons.forEach(b => {
      const btn = document.createElement("button");
      btn.textContent = b.label;
      btn.onclick = () => {
        pageSound.currentTime = 0;
        pageSound.play();
        if (b.next === "SALIR") {
          window.close();
        } else {
          showScreen(b.next);
        }
      };
      buttonsElement.appendChild(btn);
    });
    buttonsElement.style.display = "flex";
  }
}
</script>
</body>
</html>


